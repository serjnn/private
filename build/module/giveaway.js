import{S as s,i as a,s as e,e as t,C as r,a as n,c as i,b as c,D as l,d as o,f as g,g as f,h,j as u,n as m,P as p,o as d,J as v,v as y,aa as $,y as _,ab as w,z as b,X as E,L as I,A as D,q as V,r as P,u as C,t as S,B as A,w as N,ac as x,E as k,G as T,O as j,Q as M,p as G,T as L}from'./index-ba6f7af1.js';import{t as O}from'./index-66420ebf.js';import{c as F}from'./index-9ccd359e.js';import{N as R}from'./notify-a5ad4bd1.js';import{A as B}from'./api-88f676dd.js';import{a as U}from'./utils-baec67c9.js';import{S as z}from'./SVG-19e7f4d4.js';import{P as J}from'./Pagination-f7658cc1.js';import{L as q}from'./Loading-a038882e.js';import{w as H}from'./index-05811f69.js';function K(s){let a,e;return{c(){a=t('span'),e=r(s[0]),this.h()},l(t){a=i(t,'SPAN',{class:!0});var r=c(a);e=l(r,s[0]),r.forEach(g),this.h()},h(){f(a,'class','top-giveaway__days')},m(s,t){h(s,a,t),u(a,e)},p(s,a){1&a&&v(e,s[0])},d(s){s&&g(a)}}}function Q(s){let a,e;return{c(){a=t('span'),e=r(s[1]),this.h()},l(t){a=i(t,'SPAN',{class:!0});var r=c(a);e=l(r,s[1]),r.forEach(g),this.h()},h(){f(a,'class','top-giveaway__hours')},m(s,t){h(s,a,t),u(a,e)},p(s,a){2&a&&v(e,s[1])},d(s){s&&g(a)}}}function W(s){let a,e;return{c(){a=t('span'),e=r(s[2]),this.h()},l(t){a=i(t,'SPAN',{class:!0});var r=c(a);e=l(r,s[2]),r.forEach(g),this.h()},h(){f(a,'class','top-giveaway__min')},m(s,t){h(s,a,t),u(a,e)},p(s,a){4&a&&v(e,s[2])},d(s){s&&g(a)}}}function X(s){let a,e;return{c(){a=t('span'),e=r(s[3]),this.h()},l(t){a=i(t,'SPAN',{class:!0});var r=c(a);e=l(r,s[3]),r.forEach(g),this.h()},h(){f(a,'class','top-giveaway__seс')},m(s,t){h(s,a,t),u(a,e)},p(s,a){8&a&&v(e,s[3])},d(s){s&&g(a)}}}function Y(s){let a,e,p,d,v,y=s[0]>0&&K(s),$=s[1]>0&&Q(s),_=s[2]>0&&W(s),w=s[0]<1&&X(s);return{c(){a=t('div'),e=r('Осталось:\r\n  '),y&&y.c(),p=n(),$&&$.c(),d=n(),_&&_.c(),v=n(),w&&w.c(),this.h()},l(s){a=i(s,'DIV',{class:!0});var t=c(a);e=l(t,'Осталось:\r\n  '),y&&y.l(t),p=o(t),$&&$.l(t),d=o(t),_&&_.l(t),v=o(t),w&&w.l(t),t.forEach(g),this.h()},h(){f(a,'class','top-giveaway__timer')},m(s,t){h(s,a,t),u(a,e),y&&y.m(a,null),u(a,p),$&&$.m(a,null),u(a,d),_&&_.m(a,null),u(a,v),w&&w.m(a,null)},p(s,[e]){s[0]>0?y?y.p(s,e):(y=K(s),y.c(),y.m(a,p)):y&&(y.d(1),y=null),s[1]>0?$?$.p(s,e):($=Q(s),$.c(),$.m(a,d)):$&&($.d(1),$=null),s[2]>0?_?_.p(s,e):(_=W(s),_.c(),_.m(a,v)):_&&(_.d(1),_=null),s[0]<1?w?w.p(s,e):(w=X(s),w.c(),w.m(a,null)):w&&(w.d(1),w=null)},i:m,o:m,d(s){s&&g(a),y&&y.d(),$&&$.d(),_&&_.d(),w&&w.d()}}}function Z(s,a,e){let t,r,n,i,c,l,{left:o}=a;const g=p();function f(){c=setTimeout((function s(){if(e(0,t=Math.floor(o/86400)),e(1,r=Math.floor(o%86400/3600)),e(2,n=Math.floor(o%3600/60)),e(3,i=Math.floor(o%60)),g('changed',{left:o}),o<=0)return g('finished'),e(5,l=!0),void clearTimeout(c);e(4,o--,o),c=setTimeout(s,1e3)}),0)}return d((()=>(f(),()=>{clearTimeout(c)}))),s.$$set=s=>{'left'in s&&e(4,o=s.left)},s.$$.update=()=>{48&s.$$.dirty&&l&&o>0&&(e(5,l=!1),f())},[t,r,n,i,o,l]}class ss extends s{constructor(s){super(),a(this,s,Z,Y,e,{left:4})}}function as(s){let a,e;return{c(){a=t('progress'),this.h()},l(s){a=i(s,'PROGRESS',{class:!0}),c(a).forEach(g),this.h()},h(){f(a,'class',e='top-giveaway__progress _progress-'+s[0]),a.value=s[1]},m(s,e){h(s,a,e)},p(s,[t]){1&t&&e!==(e='top-giveaway__progress _progress-'+s[0])&&f(a,'class',e),2&t&&(a.value=s[1])},i:m,o:m,d(s){s&&g(a)}}}function es(s,a,e){let t,{progress:r}=a,{cssClass:n}=a;const i=O(0,{duration:400,easing:F});return y(s,i,(s=>e(1,t=s))),s.$$set=s=>{'progress'in s&&e(3,r=s.progress),'cssClass'in s&&e(0,n=s.cssClass)},s.$$.update=()=>{8&s.$$.dirty&&r&&i.set(r)},[n,t,i,r]}class ts extends s{constructor(s){super(),a(this,s,es,as,e,{progress:3,cssClass:0})}}const rs={hour:'hour',day:'day',week:'week'},ns={hour:'blue',day:'lavender',week:'purple'};function is(s){let a,e,n,o,p;return e=new z({props:{href:'#icon-check-gradient'}}),{c(){a=t('div'),_(e.$$.fragment),n=t('div'),o=r('Уже участник'),this.h()},l(s){a=i(s,'DIV',{class:!0});var t=c(a);b(e.$$.fragment,t),n=i(t,'DIV',{});var r=c(n);o=l(r,'Уже участник'),r.forEach(g),t.forEach(g),this.h()},h(){f(a,'class','top-giveaway__done')},m(s,t){h(s,a,t),D(e,a,null),u(a,n),u(n,o),p=!0},p:m,i(s){p||(S(e.$$.fragment,s),p=!0)},o(s){P(e.$$.fragment,s),p=!1},d(s){s&&g(a),A(e)}}}function cs(s){let a,e,n,o;return{c(){a=t('button'),e=r('Участвовать'),this.h()},l(s){a=i(s,'BUTTON',{class:!0});var t=c(a);e=l(t,'Участвовать'),t.forEach(g),this.h()},h(){f(a,'class','top-giveaway__btn'),k(a,'disabled',s[2])},m(t,r){h(t,a,r),u(a,e),n||(o=T(a,'click',s[7]),n=!0)},p(s,e){4&e&&k(a,'disabled',s[2])},i:m,o:m,d(s){s&&g(a),n=!1,o()}}}function ls(s){let a,e,m,p,d,y,N,x,k,T,j,M,G,L,O,F,R,B,z,J,q,H,K,Q,W,X,Y,Z,as,es,rs,ls,os,gs,fs,hs,us,ms,ps,ds,vs,ys,$s,_s,ws,bs,Es,Is,Ds=s[0].code+'',Vs=s[0].title+'',Ps=U(parseFloat(s[0].asset.price),0)+'',Cs=s[0].asset.title+'',Ss=s[0].asset.name?'<br/>'+s[0].asset.name:'',As=s[0].code+'',Ns=U(parseFloat(s[0].minPayment),0)+'';ls=new ss({props:{left:s[0].remaining}}),ls.$on('finished',s[6]),ls.$on('changed',s[4]),gs=new ts({props:{progress:s[3],cssClass:ns[s[1]]}});const xs=[cs,is],ks=[];function Ts(s,a){return s[0].isParticipant?1:0}return ws=Ts(s),bs=ks[ws]=xs[ws](s),{c(){a=t('div'),e=t('div'),m=t('div'),p=t('small'),d=r('#'),y=r(Ds),N=r(' Розыгрыш '),x=r(Vs),T=n(),j=t('div'),M=t('span'),G=r(Ps),O=n(),F=t('div'),R=t('div'),B=t('div'),z=t('strong'),J=r(Cs),q=new $(!1),H=n(),K=t('div'),Q=r('Розыгрыш #'),W=r(As),X=n(),Y=t('div'),Z=r('При пополнении от: '),as=t('span'),es=r(Ns),rs=n(),_(ls.$$.fragment),os=n(),_(gs.$$.fragment),fs=n(),hs=t('div'),us=t('img'),ps=n(),ds=t('img'),_s=n(),bs.c(),this.h()},l(s){a=i(s,'DIV',{class:!0});var t=c(a);e=i(t,'DIV',{class:!0});var r=c(e);m=i(r,'DIV',{class:!0});var n=c(m);p=i(n,'SMALL',{style:!0});var f=c(p);d=l(f,'#'),y=l(f,Ds),f.forEach(g),N=l(n,' Розыгрыш '),x=l(n,Vs),n.forEach(g),T=o(r),j=i(r,'DIV',{class:!0});var h=c(j);M=i(h,'SPAN',{class:!0});var u=c(M);G=l(u,Ps),u.forEach(g),h.forEach(g),r.forEach(g),O=o(t),F=i(t,'DIV',{class:!0});var v=c(F);R=i(v,'DIV',{class:!0});var $=c(R);B=i($,'DIV',{class:!0});var _=c(B);z=i(_,'STRONG',{});var E=c(z);J=l(E,Cs),E.forEach(g),q=w(_,!1),_.forEach(g),H=o($),K=i($,'DIV',{class:!0,style:!0});var I=c(K);Q=l(I,'Розыгрыш #'),W=l(I,As),I.forEach(g),X=o($),Y=i($,'DIV',{class:!0});var D=c(Y);Z=l(D,'При пополнении от: '),as=i(D,'SPAN',{class:!0});var V=c(as);es=l(V,Ns),V.forEach(g),D.forEach(g),rs=o($),b(ls.$$.fragment,$),os=o($),b(gs.$$.fragment,$),$.forEach(g),fs=o(v),hs=i(v,'DIV',{class:!0});var P=c(hs);us=i(P,'IMG',{class:!0,src:!0,alt:!0}),ps=o(P),ds=i(P,'IMG',{src:!0,alt:!0,title:!0,class:!0}),_s=o(P),bs.l(P),P.forEach(g),v.forEach(g),t.forEach(g),this.h()},h(){E(p,'color','rgb(130 130 130)'),f(m,'class',k='top-giveaway__title _'+ns[s[1]]),f(M,'class','__currency'),f(j,'class','top-giveaway__price'),f(e,'class',L='top-giveaway__header _gradient-bg _gradient-bg_'+ns[s[1]]),q.a=null,f(B,'class','top-giveaway__item-name'),f(K,'class','top-giveaway__refill'),E(K,'display','none'),E(K,'color','#ffbc78'),f(as,'class','__currency'),f(Y,'class','top-giveaway__refill'),f(R,'class','top-giveaway__left'),f(us,'class','top-giveaway__img'),I(us.src,ms='/img/giveaway/asset_bg_'+ns[s[1]]+'.png')||f(us,'src',ms),f(us,'alt','giveaway-img'),I(ds.src,vs=s[0].asset.image.middle)||f(ds,'src',vs),f(ds,'alt',ys=s[0].asset.title+(s[0].asset.name?' | '+s[0].asset.name:'')),f(ds,'title',$s=s[0].asset.title+(s[0].asset.name?' | '+s[0].asset.name:'')),f(ds,'class','top-giveaway__asset'),f(hs,'class','top-giveaway__right'),f(F,'class','top-giveaway__body'),f(a,'class',Es='giveaway__top top-giveaway _gradient-border _gradient-border_'+ns[s[1]])},m(s,t){h(s,a,t),u(a,e),u(e,m),u(m,p),u(p,d),u(p,y),u(m,N),u(m,x),u(e,T),u(e,j),u(j,M),u(M,G),u(a,O),u(a,F),u(F,R),u(R,B),u(B,z),u(z,J),q.m(Ss,B),u(R,H),u(R,K),u(K,Q),u(K,W),u(R,X),u(R,Y),u(Y,Z),u(Y,as),u(as,es),u(R,rs),D(ls,R,null),u(R,os),D(gs,R,null),u(F,fs),u(F,hs),u(hs,us),u(hs,ps),u(hs,ds),u(hs,_s),ks[ws].m(hs,null),Is=!0},p(s,[t]){(!Is||1&t)&&Ds!==(Ds=s[0].code+'')&&v(y,Ds),(!Is||1&t)&&Vs!==(Vs=s[0].title+'')&&v(x,Vs),(!Is||2&t&&k!==(k='top-giveaway__title _'+ns[s[1]]))&&f(m,'class',k),(!Is||1&t)&&Ps!==(Ps=U(parseFloat(s[0].asset.price),0)+'')&&v(G,Ps),(!Is||2&t&&L!==(L='top-giveaway__header _gradient-bg _gradient-bg_'+ns[s[1]]))&&f(e,'class',L),(!Is||1&t)&&Cs!==(Cs=s[0].asset.title+'')&&v(J,Cs),(!Is||1&t)&&Ss!==(Ss=s[0].asset.name?'<br/>'+s[0].asset.name:'')&&q.p(Ss),(!Is||1&t)&&As!==(As=s[0].code+'')&&v(W,As),(!Is||1&t)&&Ns!==(Ns=U(parseFloat(s[0].minPayment),0)+'')&&v(es,Ns);const r={};1&t&&(r.left=s[0].remaining),ls.$set(r);const n={};8&t&&(n.progress=s[3]),2&t&&(n.cssClass=ns[s[1]]),gs.$set(n),(!Is||2&t&&!I(us.src,ms='/img/giveaway/asset_bg_'+ns[s[1]]+'.png'))&&f(us,'src',ms),(!Is||1&t&&!I(ds.src,vs=s[0].asset.image.middle))&&f(ds,'src',vs),(!Is||1&t&&ys!==(ys=s[0].asset.title+(s[0].asset.name?' | '+s[0].asset.name:'')))&&f(ds,'alt',ys),(!Is||1&t&&$s!==($s=s[0].asset.title+(s[0].asset.name?' | '+s[0].asset.name:'')))&&f(ds,'title',$s);let i=ws;ws=Ts(s),ws===i?ks[ws].p(s,t):(V(),P(ks[i],1,1,(()=>{ks[i]=null})),C(),bs=ks[ws],bs?bs.p(s,t):(bs=ks[ws]=xs[ws](s),bs.c()),S(bs,1),bs.m(hs,null)),(!Is||2&t&&Es!==(Es='giveaway__top top-giveaway _gradient-border _gradient-border_'+ns[s[1]]))&&f(a,'class',Es)},i(s){Is||(S(ls.$$.fragment,s),S(gs.$$.fragment,s),S(bs),Is=!0)},o(s){P(ls.$$.fragment,s),P(gs.$$.fragment,s),P(bs),Is=!1},d(s){s&&g(a),A(ls),A(gs),ks[ws].d()}}}function os(s,a,e){let{giveaway:t}=a,{type:r}=a;const{user:n,config:i}=N('context');let c,l=o(t.remaining);function o(s){return Math.floor(100*(1-s/t.period))/100}async function g(s){e(2,c=!0);try{const a=await B.post(i.endpoints.join,function(s){let a=new FormData;return a.append('giveawayID',parseFloat(s.giveawayID).toString()),a}({giveawayID:s}));a.success?(e(0,t.isParticipant=!0,t),R.success(a.message,'Поздравляем!')):R.error(a)}catch(s){R.error(s)}e(2,c=!1)}return s.$$set=s=>{'giveaway'in s&&e(0,t=s.giveaway),'type'in s&&e(1,r=s.type)},[t,r,c,l,function(s){e(3,l=o(s.detail.left))},g,function(a){x.call(this,s,a)},()=>{!c&&g(t.id)}]}class gs extends s{constructor(s){super(),a(this,s,os,ls,e,{giveaway:0,type:1})}}function fs(s){let a,e;return{c(){a=t('small'),e=r('нет участников')},l(s){a=i(s,'SMALL',{});var t=c(a);e=l(t,'нет участников'),t.forEach(g)},m(s,t){h(s,a,t),u(a,e)},p:m,d(s){s&&g(a)}}}function hs(s){let a,e,m,p,d,y,$,_,w,b=s[0].user.username+'';return{c(){a=t('a'),e=t('img'),y=n(),$=t('a'),_=r(b),this.h()},l(s){a=i(s,'A',{href:!0});var t=c(a);e=i(t,'IMG',{src:!0,alt:!0,class:!0}),t.forEach(g),y=o(s),$=i(s,'A',{href:!0,class:!0});var r=c($);_=l(r,b),r.forEach(g),this.h()},h(){I(e.src,m=s[0].user.image.thumb)||f(e,'src',m),f(e,'alt',p=s[0].user.username),f(e,'class','winner-item__icon'),f(a,'href',d=s[0].user.link),f($,'href',w=s[0].user.link),f($,'class','winner-item__nickname')},m(s,t){h(s,a,t),u(a,e),h(s,y,t),h(s,$,t),u($,_)},p(s,t){1&t&&!I(e.src,m=s[0].user.image.thumb)&&f(e,'src',m),1&t&&p!==(p=s[0].user.username)&&f(e,'alt',p),1&t&&d!==(d=s[0].user.link)&&f(a,'href',d),1&t&&b!==(b=s[0].user.username+'')&&v(_,b),1&t&&w!==(w=s[0].user.link)&&f($,'href',w)},d(s){s&&g(a),s&&g(y),s&&g($)}}}function us(s){let a,e,p,d,y,$,_,w,b,E,I,D,V,P,C,S,A,N,x,k,T=s[0].finishedAt+'',j=s[0].giveawayID+'',M=s[0].asset+'',G=U(s[0].price,0)+'';function L(s,a){return s[0].user?hs:fs}let O=L(s),F=O(s);return{c(){a=t('li'),e=t('div'),p=t('div'),F.c(),d=n(),y=t('div'),$=t('span'),_=r(T),w=n(),b=t('strong'),E=r('#'),I=r(j),D=n(),V=t('div'),P=t('div'),C=r(M),A=n(),N=t('div'),x=t('span'),k=r(G),this.h()},l(s){a=i(s,'LI',{class:!0});var t=c(a);e=i(t,'DIV',{class:!0});var r=c(e);p=i(r,'DIV',{class:!0});var n=c(p);F.l(n),n.forEach(g),d=o(r),y=i(r,'DIV',{class:!0});var f=c(y);$=i(f,'SPAN',{});var h=c($);_=l(h,T),h.forEach(g),w=o(f),b=i(f,'STRONG',{title:!0});var u=c(b);E=l(u,'#'),I=l(u,j),u.forEach(g),f.forEach(g),r.forEach(g),D=o(t),V=i(t,'DIV',{class:!0});var m=c(V);P=i(m,'DIV',{class:!0});var v=c(P);C=l(v,M),v.forEach(g),A=o(m),N=i(m,'DIV',{class:!0});var S=c(N);x=i(S,'SPAN',{class:!0});var L=c(x);k=l(L,G),L.forEach(g),S.forEach(g),m.forEach(g),t.forEach(g),this.h()},h(){f(p,'class','winner-item__user'),f(b,'title','Номер розыгрыша'),f(y,'class','winner-item__num'),f(e,'class','winner-item__header'),f(P,'class',S='winner-item__prize _'+s[1]),f(x,'class','__currency'),f(N,'class','winner-item__price'),f(V,'class','winner-item__body'),f(a,'class','body-giveaway__winner-item winner-item')},m(s,t){h(s,a,t),u(a,e),u(e,p),F.m(p,null),u(e,d),u(e,y),u(y,$),u($,_),u(y,w),u(y,b),u(b,E),u(b,I),u(a,D),u(a,V),u(V,P),u(P,C),u(V,A),u(V,N),u(N,x),u(x,k)},p(s,[a]){O===(O=L(s))&&F?F.p(s,a):(F.d(1),F=O(s),F&&(F.c(),F.m(p,null))),1&a&&T!==(T=s[0].finishedAt+'')&&v(_,T),1&a&&j!==(j=s[0].giveawayID+'')&&v(I,j),1&a&&M!==(M=s[0].asset+'')&&v(C,M),2&a&&S!==(S='winner-item__prize _'+s[1])&&f(P,'class',S),1&a&&G!==(G=U(s[0].price,0)+'')&&v(k,G)},i:m,o:m,d(s){s&&g(a),F.d()}}}function ms(s,a,e){let{giveaway:t}=a,{cssClass:r}=a;return s.$$set=s=>{'giveaway'in s&&e(0,t=s.giveaway),'cssClass'in s&&e(1,r=s.cssClass)},[t,r]}class ps extends s{constructor(s){super(),a(this,s,ms,us,e,{giveaway:0,cssClass:1})}}function ds(s,a,e){const t=s.slice();return t[9]=a[e],t}function vs(s){let a,e;return{c(){a=t('div'),e=r('Еще не завершен ни один розыгрыш этого типа'),this.h()},l(s){a=i(s,'DIV',{class:!0});var t=c(a);e=l(t,'Еще не завершен ни один розыгрыш этого типа'),t.forEach(g),this.h()},h(){f(a,'class','winner-item winner-item__empty')},m(s,t){h(s,a,t),u(a,e)},p:m,i:m,o:m,d(s){s&&g(a)}}}function ys(s){let a,e,r,l,m,p,d=[],v=new Map,y=s[2]&&$s(),$=s[0].giveaways;const w=s=>s[9].giveawayID;for(let a=0;a<$.length;a+=1){let e=ds(s,$,a),t=w(e);v.set(t,d[a]=_s(t,e))}return m=new J({props:{currentPage:s[3],perPage:s[5],totalCount:s[4]}}),m.$on('change',s[7]),{c(){a=t('div'),y&&y.c(),e=n(),r=t('ul');for(let s=0;s<d.length;s+=1)d[s].c();l=n(),_(m.$$.fragment),this.h()},l(s){a=i(s,'DIV',{class:!0});var t=c(a);y&&y.l(t),e=o(t),r=i(t,'UL',{});var n=c(r);for(let s=0;s<d.length;s+=1)d[s].l(n);n.forEach(g),t.forEach(g),l=o(s),b(m.$$.fragment,s),this.h()},h(){f(a,'class','body-giveaway__winners-list'),k(a,'in-loading',!0===s[2])},m(s,t){h(s,a,t),y&&y.m(a,null),u(a,e),u(a,r);for(let s=0;s<d.length;s+=1)d[s]&&d[s].m(r,null);h(s,l,t),D(m,s,t),p=!0},p(s,t){s[2]?y?4&t&&S(y,1):(y=$s(),y.c(),S(y,1),y.m(a,e)):y&&(V(),P(y,1,1,(()=>{y=null})),C()),3&t&&($=s[0].giveaways,V(),d=j(d,t,w,1,s,$,v,r,M,_s,null,ds),C()),(!p||4&t)&&k(a,'in-loading',!0===s[2]);const n={};8&t&&(n.currentPage=s[3]),m.$set(n)},i(s){if(!p){S(y);for(let s=0;s<$.length;s+=1)S(d[s]);S(m.$$.fragment,s),p=!0}},o(s){P(y);for(let s=0;s<d.length;s+=1)P(d[s]);P(m.$$.fragment,s),p=!1},d(s){s&&g(a),y&&y.d();for(let s=0;s<d.length;s+=1)d[s].d();s&&g(l),A(m,s)}}}function $s(s){let a,e;return a=new q({}),{c(){_(a.$$.fragment)},l(s){b(a.$$.fragment,s)},m(s,t){D(a,s,t),e=!0},i(s){e||(S(a.$$.fragment,s),e=!0)},o(s){P(a.$$.fragment,s),e=!1},d(s){A(a,s)}}}function _s(s,a){let e,t,r;return t=new ps({props:{giveaway:a[9],cssClass:ns[a[1]]}}),{key:s,first:null,c(){e=G(),_(t.$$.fragment),this.h()},l(s){e=G(),b(t.$$.fragment,s),this.h()},h(){this.first=e},m(s,a){h(s,e,a),D(t,s,a),r=!0},p(s,e){a=s;const r={};1&e&&(r.giveaway=a[9]),2&e&&(r.cssClass=ns[a[1]]),t.$set(r)},i(s){r||(S(t.$$.fragment,s),r=!0)},o(s){P(t.$$.fragment,s),r=!1},d(s){s&&g(e),A(t,s)}}}function ws(s){let a,e,m,p,d,v,y,$,w,E,I,N;m=new z({props:{href:'/img/svg/giveaway.svg#icon-cup',addClass:'icon__'+ns[s[1]]}});const x=[ys,vs],k=[];function T(s,a){return s[0].giveaways.length?0:1}return w=T(s),E=k[w]=x[w](s),{c(){a=t('div'),e=t('div'),_(m.$$.fragment),p=n(),d=t('div'),v=r('Победители'),$=n(),E.c(),this.h()},l(s){a=i(s,'DIV',{class:!0});var t=c(a);e=i(t,'DIV',{class:!0});var r=c(e);b(m.$$.fragment,r),p=o(r),d=i(r,'DIV',{class:!0});var n=c(d);v=l(n,'Победители'),n.forEach(g),r.forEach(g),$=o(t),E.l(t),t.forEach(g),this.h()},h(){f(d,'class',y='body-giveaway__title _'+ns[s[1]]),f(e,'class','body-giveaway__header'),f(a,'class',I='giveaway__body body-giveaway _gradient-border _gradient-border_reverse_'+ns[s[1]]+' _'+ns[s[1]]+'-bg')},m(s,t){h(s,a,t),u(a,e),D(m,e,null),u(e,p),u(e,d),u(d,v),u(a,$),k[w].m(a,null),N=!0},p(s,[e]){const t={};2&e&&(t.addClass='icon__'+ns[s[1]]),m.$set(t),(!N||2&e&&y!==(y='body-giveaway__title _'+ns[s[1]]))&&f(d,'class',y);let r=w;w=T(s),w===r?k[w].p(s,e):(V(),P(k[r],1,1,(()=>{k[r]=null})),C(),E=k[w],E?E.p(s,e):(E=k[w]=x[w](s),E.c()),S(E,1),E.m(a,null)),(!N||2&e&&I!==(I='giveaway__body body-giveaway _gradient-border _gradient-border_reverse_'+ns[s[1]]+' _'+ns[s[1]]+'-bg'))&&f(a,'class',I)},i(s){N||(S(m.$$.fragment,s),S(E),N=!0)},o(s){P(m.$$.fragment,s),P(E),N=!1},d(s){s&&g(a),A(m),k[w].d()}}}function bs(s,a,e){let{history:t}=a,{type:r}=a;const{config:n}=N('context');let i=!1,c=t.totalCount-1,l=1,o=t.perPage;async function g(s){if(!0!==i){if(e(2,i=!0),s.page!==l){const a=await B.get(`${n.endpoints.history}?page=${s.page}&type=${r}`);e(3,l=s.page),e(0,t.giveaways=a,t)}e(2,i=!1)}}return s.$$set=s=>{'history'in s&&e(0,t=s.history),'type'in s&&e(1,r=s.type)},[t,r,i,l,c,o,g,s=>g({page:s.detail})]}class Es extends s{constructor(s){super(),a(this,s,bs,ws,e,{history:0,type:1})}}function Is(s){let a,e;return a=new gs({props:{giveaway:s[0][s[2]],type:s[2]}}),a.$on('finished',s[4]),{c(){_(a.$$.fragment)},l(s){b(a.$$.fragment,s)},m(s,t){D(a,s,t),e=!0},p(s,e){const t={};5&e&&(t.giveaway=s[0][s[2]]),4&e&&(t.type=s[2]),a.$set(t)},i(s){e||(S(a.$$.fragment,s),e=!0)},o(s){P(a.$$.fragment,s),e=!1},d(s){A(a,s)}}}function Ds(s){let a,e;return a=new Es({props:{history:s[1][s[2]],type:s[2]}}),{c(){_(a.$$.fragment)},l(s){b(a.$$.fragment,s)},m(s,t){D(a,s,t),e=!0},p(s,e){const t={};6&e&&(t.history=s[1][s[2]]),4&e&&(t.type=s[2]),a.$set(t)},i(s){e||(S(a.$$.fragment,s),e=!0)},o(s){P(a.$$.fragment,s),e=!1},d(s){A(a,s)}}}function Vs(s){let a,e,r,n,l,o;return e=new z({props:{href:'/img/svg/giveaway.svg#icon-double-arrow',addClass:'more__icon'}}),{c(){a=t('button'),_(e.$$.fragment),this.h()},l(s){a=i(s,'BUTTON',{class:!0});var t=c(a);b(e.$$.fragment,t),t.forEach(g),this.h()},h(){f(a,'class',r='body-giveaway__more more __'+ns[s[2]])},m(t,r){h(t,a,r),D(e,a,null),n=!0,l||(o=T(a,'click',s[5],{once:!0}),l=!0)},p(s,e){(!n||4&e&&r!==(r='body-giveaway__more more __'+ns[s[2]]))&&f(a,'class',r)},i(s){n||(S(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){s&&g(a),A(e),l=!1,o()}}}function Ps(s){let a,e,r,l,m=s[0][s[2]]&&Is(s),p=s[1][s[2]]&&Ds(s),d=!s[3]&&Vs(s);return{c(){a=t('div'),m&&m.c(),e=n(),p&&p.c(),r=n(),d&&d.c(),this.h()},l(s){a=i(s,'DIV',{class:!0});var t=c(a);m&&m.l(t),e=o(t),p&&p.l(t),r=o(t),d&&d.l(t),t.forEach(g),this.h()},h(){f(a,'class','giveaway__item'),k(a,'show-more',s[3])},m(s,t){h(s,a,t),m&&m.m(a,null),u(a,e),p&&p.m(a,null),u(a,r),d&&d.m(a,null),l=!0},p(s,[t]){s[0][s[2]]?m?(m.p(s,t),5&t&&S(m,1)):(m=Is(s),m.c(),S(m,1),m.m(a,e)):m&&(V(),P(m,1,1,(()=>{m=null})),C()),s[1][s[2]]?p?(p.p(s,t),6&t&&S(p,1)):(p=Ds(s),p.c(),S(p,1),p.m(a,r)):p&&(V(),P(p,1,1,(()=>{p=null})),C()),s[3]?d&&(V(),P(d,1,1,(()=>{d=null})),C()):d?(d.p(s,t),8&t&&S(d,1)):(d=Vs(s),d.c(),S(d,1),d.m(a,null)),(!l||8&t)&&k(a,'show-more',s[3])},i(s){l||(S(m),S(p),S(d),l=!0)},o(s){P(m),P(p),P(d),l=!1},d(s){s&&g(a),m&&m.d(),p&&p.d(),d&&d.d()}}}function Cs(s,a,e){let{giveaways:t}=a,{history:r}=a,{type:n}=a,i=!1;return s.$$set=s=>{'giveaways'in s&&e(0,t=s.giveaways),'history'in s&&e(1,r=s.history),'type'in s&&e(2,n=s.type)},[t,r,n,i,function(a){x.call(this,s,a)},()=>e(3,i=!0)]}class Ss extends s{constructor(s){super(),a(this,s,Cs,Ps,e,{giveaways:0,history:1,type:2})}}const As=function(){let s=0;const a=H(s,(a=>{const e=setInterval((()=>{a(s++)}),1e3);return()=>clearInterval(e)}));return{subscribe:a.subscribe,set:e=>a.set(s=e)}}();function Ns(s){let a,e;return a=new q({}),{c(){_(a.$$.fragment)},l(s){b(a.$$.fragment,s)},m(s,t){D(a,s,t),e=!0},i(s){e||(S(a.$$.fragment,s),e=!0)},o(s){P(a.$$.fragment,s),e=!1},d(s){A(a,s)}}}function xs(s){let a,e,r,l,m,p,d;return e=new Ss({props:{giveaways:s[0],history:s[1],type:rs.hour}}),e.$on('finished',s[3]),l=new Ss({props:{giveaways:s[0],history:s[1],type:rs.day}}),l.$on('finished',s[3]),p=new Ss({props:{giveaways:s[0],history:s[1],type:rs.week}}),p.$on('finished',s[3]),{c(){a=t('div'),_(e.$$.fragment),r=n(),_(l.$$.fragment),m=n(),_(p.$$.fragment),this.h()},l(s){a=i(s,'DIV',{class:!0});var t=c(a);b(e.$$.fragment,t),r=o(t),b(l.$$.fragment,t),m=o(t),b(p.$$.fragment,t),t.forEach(g),this.h()},h(){f(a,'class','giveaway__wrapper')},m(s,t){h(s,a,t),D(e,a,null),u(a,r),D(l,a,null),u(a,m),D(p,a,null),d=!0},p(s,a){const t={};1&a&&(t.giveaways=s[0]),2&a&&(t.history=s[1]),e.$set(t);const r={};1&a&&(r.giveaways=s[0]),2&a&&(r.history=s[1]),l.$set(r);const n={};1&a&&(n.giveaways=s[0]),2&a&&(n.history=s[1]),p.$set(n)},i(s){d||(S(e.$$.fragment,s),S(l.$$.fragment,s),S(p.$$.fragment,s),d=!0)},o(s){P(e.$$.fragment,s),P(l.$$.fragment,s),P(p.$$.fragment,s),d=!1},d(s){s&&g(a),A(e),A(l),A(p)}}}function ks(s){let a,e,t,r=s[2]&&Ns(),i=s[0]&&xs(s);return{c(){r&&r.c(),a=n(),i&&i.c(),e=G()},l(s){r&&r.l(s),a=o(s),i&&i.l(s),e=G()},m(s,n){r&&r.m(s,n),h(s,a,n),i&&i.m(s,n),h(s,e,n),t=!0},p(s,[t]){s[2]?r?4&t&&S(r,1):(r=Ns(),r.c(),S(r,1),r.m(a.parentNode,a)):r&&(V(),P(r,1,1,(()=>{r=null})),C()),s[0]?i?(i.p(s,t),1&t&&S(i,1)):(i=xs(s),i.c(),S(i,1),i.m(e.parentNode,e)):i&&(V(),P(i,1,1,(()=>{i=null})),C())},i(s){t||(S(r),S(i),t=!0)},o(s){P(r),P(i),t=!1},d(s){r&&r.d(s),s&&g(a),i&&i.d(s),s&&g(e)}}}function Ts(s,a,e){let t,{user:r}=a,{config:n}=a,i=!1,c=!0;const l=As.subscribe((()=>{}));return d((async()=>{const s=await B.get(n.endpoints.fetch);return e(0,t=s.giveaways),B.get(n.endpoints.history).then((s=>{e(1,i=s)})),e(2,c=!1),As.set(n.timestamp),l})),L('context',{user:r,isGuest:r.isGuest,config:n}),s.$$set=s=>{'user'in s&&e(4,r=s.user),'config'in s&&e(5,n=s.config)},[t,i,c,async function(){setTimeout((async function s(){const a=await B.get(n.endpoints.fetch);e(0,t=a.giveaways),function(s){return s[rs.HOUR]&&s[rs.DAY]&&s[rs.WEEK]}(t)&&!function(s){let a=!1;for(const e in s)a=a||s[e].remaining<=0;return a}(t)||setTimeout(s,15e3)}),15e3)},r,n]}var js=document.getElementById('giveaway-app'),Ms=new class extends s{constructor(s){super(),a(this,s,Ts,ks,e,{user:4,config:5})}}({target:js,hydrate:!0,props:{user:__userData,config:JSON.parse(atob(__giveawayConfig))}});export{Ms as default};
